# é”™è¯¯å¤„ç†æŒ‡å—

**ç‰ˆæœ¬**: v2.0.1
**æ›´æ–°æ—¥æœŸ**: 2026-01-10
**çŠ¶æ€**: âœ… å·²ä¼˜åŒ–

---

## ğŸ“‹ å¸¸è§é”™è¯¯ç±»å‹åŠè§£å†³æ–¹æ¡ˆ

### 1. ç¬¬ä¸‰æ–¹ç½‘ç«™JavaScripté”™è¯¯

#### é”™è¯¯ç¤ºä¾‹
```
b0c0a03.js:4 parseImageXUrl "tplv-k3u1fbpfcp-jj-mark..." parse error
```

#### é—®é¢˜åˆ†æ
- **æ¥æº**: è¿™æ˜¯ç›®æ ‡ç½‘ç«™è‡ªèº«çš„JavaScripté”™è¯¯
- **åŸå› **: ç½‘ç«™ä»£ç ä¸­çš„å›¾ç‰‡URLè§£æå‡½æ•°å‡ºé”™
- **å½±å“**: ä¸åº”å½±å“æµ‹è¯•å·¥å…·çš„æ­£å¸¸è¿è¡Œ

#### âœ… å·²å®æ–½çš„è§£å†³æ–¹æ¡ˆ

**1. å…¨å±€é”™è¯¯æ•è·**ï¼ˆcontent-script.jsï¼‰

```javascript
// æ•è·å¹¶è¿‡æ»¤ç¬¬ä¸‰æ–¹ç½‘ç«™çš„JavaScripté”™è¯¯
window.addEventListener('error', (event) => {
  if (event.filename && !event.filename.includes('chrome-extension://')) {
    console.warn('[Webæµ‹è¯•å·¥å…·] æ£€æµ‹åˆ°é¡µé¢JavaScripté”™è¯¯ï¼ˆå·²å¿½ç•¥ï¼‰:', {
      message: event.message,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno
    });
    event.preventDefault();
    return true;
  }
}, true);

// æ•è·Promise rejectioné”™è¯¯
window.addEventListener('unhandledrejection', (event) => {
  console.warn('[Webæµ‹è¯•å·¥å…·] æ£€æµ‹åˆ°æœªå¤„ç†çš„Promiseé”™è¯¯ï¼ˆå·²å¿½ç•¥ï¼‰:', event.reason);
  event.preventDefault();
});
```

**ç‰¹æ€§**:
- âœ… è‡ªåŠ¨åŒºåˆ†æ‰©å±•é”™è¯¯å’Œé¡µé¢é”™è¯¯
- âœ… é˜»æ­¢é”™è¯¯ä¼ æ’­ï¼Œä¸ä¸­æ–­æµ‹è¯•
- âœ… è®°å½•è­¦å‘Šæ—¥å¿—ä¾¿äºè°ƒè¯•
- âœ… æ”¯æŒPromiseé”™è¯¯æ•è·

**2. CustomTestExecutorå¢å¼ºé”™è¯¯å¤„ç†**

```javascript
async executeStep (step) {
  try {
    // ... æ‰§è¡Œæ­¥éª¤
  } catch (error) {
    // æ£€æµ‹ç‰¹å®šç±»å‹é”™è¯¯
    if (error.message && error.message.includes('parse error')) {
      console.warn(`æ£€æµ‹åˆ°é¡µé¢è§£æé”™è¯¯ï¼ˆç¬¬ä¸‰æ–¹é—®é¢˜ï¼‰ï¼Œç»§ç»­æ‰§è¡Œ`);
      return; // ä¸ä¸­æ–­æµ‹è¯•
    }
    throw error; // å…¶ä»–é”™è¯¯æ­£å¸¸æŠ›å‡º
  }
}
```

**3. æ­¥éª¤é‡è¯•æœºåˆ¶**

```javascript
async stepClick (step) {
  const maxRetries = step.retries || 3;
  let lastError = null;

  for (let i = 0; i < maxRetries; i++) {
    try {
      // å°è¯•æ‰§è¡Œæ“ä½œ
      const element = document.querySelector(step.selector);
      element.click();
      return; // æˆåŠŸ
    } catch (error) {
      lastError = error;
      if (i < maxRetries - 1) {
        await this.wait(1000); // ç­‰å¾…åé‡è¯•
      }
    }
  }
  throw lastError; // æ‰€æœ‰é‡è¯•å¤±è´¥
}
```

**æ”¯æŒé‡è¯•çš„æ­¥éª¤**:
- âœ… clickï¼ˆç‚¹å‡»ï¼‰
- âœ… inputï¼ˆè¾“å…¥ï¼‰
- âœ… selectï¼ˆé€‰æ‹©ï¼‰
- âœ… hoverï¼ˆæ‚¬åœï¼‰
- âœ… waitForElementï¼ˆç­‰å¾…å…ƒç´ ï¼‰

---

## ğŸ” é”™è¯¯ç±»å‹è¯¦è§£

### A. é¡µé¢JavaScripté”™è¯¯

**ç‰¹å¾**:
- é”™è¯¯æ¥è‡ªéæ‰©å±•çš„JavaScriptæ–‡ä»¶
- é€šå¸¸åŒ…å«ç½‘ç«™åŸŸåæˆ–ç¬¬ä¸‰æ–¹åº“åç§°
- é”™è¯¯ä¿¡æ¯å¦‚ï¼š`parse error`, `undefined is not a function`, `Cannot read property`

**å¤„ç†æ–¹å¼**:
1. âœ… è‡ªåŠ¨æ•è·å¹¶è®°å½•
2. âœ… ä¸ä¸­æ–­æµ‹è¯•æ‰§è¡Œ
3. âœ… åœ¨æ§åˆ¶å°æ˜¾ç¤ºè­¦å‘Šï¼ˆé»„è‰²ï¼‰
4. âœ… ç»§ç»­ä¸‹ä¸€ä¸ªæµ‹è¯•æ­¥éª¤

**ç¤ºä¾‹é”™è¯¯**:
```javascript
// å›¾ç‰‡URLè§£æé”™è¯¯
parseImageXUrl "..." parse error

// ç¬¬ä¸‰æ–¹åº“é”™è¯¯
jquery.min.js:2 Uncaught TypeError: Cannot read property 'length' of undefined

// ç½‘ç«™ä»£ç é”™è¯¯
main.js:123 Uncaught ReferenceError: analytics is not defined
```

### B. å…ƒç´ æŸ¥æ‰¾å¤±è´¥

**ç‰¹å¾**:
- `æ‰¾ä¸åˆ°å…ƒç´ : xxx`
- é€‰æ‹©å™¨é”™è¯¯æˆ–å…ƒç´ æœªåŠ è½½

**å¤„ç†æ–¹å¼**:
1. âœ… æœ€å¤šé‡è¯•3æ¬¡
2. âœ… æ¯æ¬¡é‡è¯•å‰ç­‰å¾…1ç§’
3. âœ… 3æ¬¡å¤±è´¥åæŠ›å‡ºé”™è¯¯
4. âœ… å»ºè®®ä½¿ç”¨ `waitForElement` æ­¥éª¤

**è§£å†³å»ºè®®**:
```json
{
  "type": "waitForElement",
  "selector": "#target-element",
  "timeout": 10000,
  "description": "ç­‰å¾…å…ƒç´ åŠ è½½"
},
{
  "type": "click",
  "selector": "#target-element",
  "description": "ç‚¹å‡»å…ƒç´ "
}
```

### C. å…ƒç´ ä¸å¯è§/ä¸å¯äº¤äº’

**ç‰¹å¾**:
- `å…ƒç´ ä¸å¯è§: xxx`
- å…ƒç´ è¢«éšè—æˆ–è¢«å…¶ä»–å…ƒç´ é®æŒ¡

**å¤„ç†æ–¹å¼**:
1. âœ… æ£€æŸ¥ `offsetParent` å±æ€§
2. âœ… ç­‰å¾…å…ƒç´ å®Œå…¨åŠ è½½
3. âœ… å»ºè®®å…ˆæ»šåŠ¨åˆ°å…ƒç´ ä½ç½®

**è§£å†³å»ºè®®**:
```json
{
  "type": "scroll",
  "direction": "down",
  "amount": 300,
  "description": "æ»šåŠ¨åˆ°å…ƒç´ "
},
{
  "type": "click",
  "selector": "#hidden-element",
  "description": "ç‚¹å‡»å…ƒç´ "
}
```

### D. è¶…æ—¶é”™è¯¯

**ç‰¹å¾**:
- `å…ƒç´ æœªåœ¨ XXXms å†…å‡ºç°`
- é¡µé¢åŠ è½½æ…¢æˆ–ç½‘ç»œé—®é¢˜

**å¤„ç†æ–¹å¼**:
1. âœ… å¢åŠ  `timeout` å‚æ•°
2. âœ… ä½¿ç”¨ `wait` æ­¥éª¤ç­‰å¾…é¡µé¢ç¨³å®š
3. âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥

**è§£å†³å»ºè®®**:
```json
{
  "type": "wait",
  "duration": 3000,
  "description": "ç­‰å¾…é¡µé¢åŠ è½½"
},
{
  "type": "waitForElement",
  "selector": "#slow-element",
  "timeout": 15000,
  "description": "ç­‰å¾…æ…¢åŠ è½½å…ƒç´ "
}
```

---

## ğŸ› ï¸ æµ‹è¯•ç”¨ä¾‹æœ€ä½³å®è·µ

### 1. ä½¿ç”¨é‡è¯•å‚æ•°

```json
{
  "type": "click",
  "selector": "#unstable-button",
  "retries": 5,
  "description": "ç‚¹å‡»å¯èƒ½ä¸ç¨³å®šçš„æŒ‰é’®"
}
```

### 2. æ·»åŠ ç­‰å¾…æ—¶é—´

```json
{
  "type": "click",
  "selector": "#submit-btn",
  "waitAfter": 2000,
  "description": "æäº¤è¡¨å•ï¼Œç­‰å¾…å“åº”"
}
```

### 3. å…ˆéªŒè¯å…ƒç´ å­˜åœ¨

```json
{
  "type": "verify",
  "verifyType": "elementExists",
  "selector": "#target",
  "description": "éªŒè¯å…ƒç´ å­˜åœ¨"
},
{
  "type": "click",
  "selector": "#target",
  "description": "ç‚¹å‡»å·²éªŒè¯çš„å…ƒç´ "
}
```

### 4. ä½¿ç”¨æ›´å…·ä½“çš„é€‰æ‹©å™¨

```json
// âŒ ä¸æ¨èï¼ˆå¤ªå®½æ³›ï¼‰
"selector": "button"

// âœ… æ¨èï¼ˆæ›´å…·ä½“ï¼‰
"selector": "button#submit-form[type='submit']"
```

### 5. é…ç½®stopOnFailure

```json
{
  "id": "TC001",
  "name": "å…³é”®æµç¨‹æµ‹è¯•",
  "stopOnFailure": true,
  "steps": [...]
}
```

---

## ğŸ“Š é”™è¯¯ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—

**æ–¹æ³•1: æµè§ˆå™¨æ§åˆ¶å°**
```
æŒ‰F12 â†’ Consoleæ ‡ç­¾
è¿‡æ»¤: "[Webæµ‹è¯•å·¥å…·]"
```

**æ–¹æ³•2: æ‚¬æµ®çƒæ—¥å¿—**
- ç‚¹å‡»é¡µé¢å³ä¸‹è§’çš„æ‚¬æµ®çƒ
- æŸ¥çœ‹"æœ€è¿‘æ—¥å¿—"åŒºåŸŸ
- çº¢è‰²æ ‡è®°çš„æ˜¯é”™è¯¯æ—¥å¿—

**æ–¹æ³•3: æµ‹è¯•æŠ¥å‘Š**
- ç‚¹å‡»popupä¸­çš„"æŸ¥çœ‹æŠ¥å‘Š"æŒ‰é’®
- æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå †æ ˆ

### å¸¸è§æ—¥å¿—æ ¼å¼

```
[Webæµ‹è¯•å·¥å…·] æ£€æµ‹åˆ°é¡µé¢JavaScripté”™è¯¯ï¼ˆå·²å¿½ç•¥ï¼‰: {
  message: "parseImageXUrl parse error",
  filename: "https://example.com/b0c0a03.js",
  lineno: 4,
  colno: 12
}
```

**è§£è¯»**:
- âœ… `å·²å¿½ç•¥` - é”™è¯¯ä¸ä¼šå½±å“æµ‹è¯•
- ğŸ“ `filename` - é”™è¯¯æ¥æºæ–‡ä»¶
- ğŸ“ `lineno/colno` - é”™è¯¯ä½ç½®

---

## ğŸ”§ æ•…éšœæ’æŸ¥æµç¨‹

### é—®é¢˜: æµ‹è¯•çªç„¶ä¸­æ–­

**æ£€æŸ¥æ­¥éª¤**:
1. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ï¼ˆéé»„è‰²è­¦å‘Šï¼‰
2. æ£€æŸ¥æ˜¯å¦æ˜¯é€‰æ‹©å™¨é—®é¢˜
3. éªŒè¯ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. å°è¯•å¢åŠ ç­‰å¾…æ—¶é—´

**å‘½ä»¤**:
```javascript
// åœ¨æ§åˆ¶å°è¿è¡Œ
document.querySelector('YOUR_SELECTOR')
// å¦‚æœè¿”å›nullï¼Œè¯´æ˜é€‰æ‹©å™¨æœ‰é—®é¢˜
```

### é—®é¢˜: å…ƒç´ æ‰¾ä¸åˆ°

**æ£€æŸ¥æ­¥éª¤**:
1. ç¡®è®¤å…ƒç´ æ˜¯å¦å­˜åœ¨: `document.querySelector('selector')`
2. ç¡®è®¤å…ƒç´ æ˜¯å¦å¯è§: `element.offsetParent !== null`
3. ç¡®è®¤é€‰æ‹©å™¨è¯­æ³•æ˜¯å¦æ­£ç¡®
4. æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨iframeä¸­

**è§£å†³æ–¹æ¡ˆ**:
```json
// æ·»åŠ æ›´é•¿çš„ç­‰å¾…æ—¶é—´
{
  "type": "waitForElement",
  "selector": "#dynamic-element",
  "timeout": 20000
}
```

### é—®é¢˜: ç¬¬ä¸‰æ–¹é”™è¯¯å½±å“æµ‹è¯•

**ç°åœ¨å·²è‡ªåŠ¨å¤„ç†**:
- âœ… æ‰€æœ‰ç¬¬ä¸‰æ–¹é¡µé¢é”™è¯¯è‡ªåŠ¨æ•è·
- âœ… é”™è¯¯è¢«æ ‡è®°ä¸º"å·²å¿½ç•¥"
- âœ… æµ‹è¯•ç»§ç»­æ­£å¸¸æ‰§è¡Œ
- âœ… é”™è¯¯è®°å½•åœ¨æ—¥å¿—ä¸­ä¾¿äºåˆ†æ

---

## ğŸ“š é”™è¯¯ä»£ç å‚è€ƒ

### é”™è¯¯ç­‰çº§

| ç­‰çº§ | é¢œè‰² | å¤„ç†æ–¹å¼ | ç¤ºä¾‹ |
|------|------|---------|------|
| ERROR | ğŸ”´ çº¢è‰² | ä¸­æ–­æµ‹è¯• | é€‰æ‹©å™¨é”™è¯¯ã€éªŒè¯å¤±è´¥ |
| WARN | ğŸŸ¡ é»„è‰² | è®°å½•ä½†ç»§ç»­ | ç¬¬ä¸‰æ–¹JSé”™è¯¯ã€é‡è¯•æˆåŠŸ |
| INFO | ğŸ”µ è“è‰² | æ­£å¸¸æ—¥å¿— | æ­¥éª¤å¼€å§‹/å®Œæˆ |
| SUCCESS | ğŸŸ¢ ç»¿è‰² | æˆåŠŸä¿¡æ¯ | æµ‹è¯•é€šè¿‡ã€éªŒè¯æˆåŠŸ |

### è‡ªåŠ¨å¿½ç•¥çš„é”™è¯¯ç±»å‹

âœ… å·²é…ç½®è‡ªåŠ¨å¿½ç•¥:
- å›¾ç‰‡åŠ è½½é”™è¯¯
- ç¬¬ä¸‰æ–¹è„šæœ¬é”™è¯¯
- å¹¿å‘Šè„šæœ¬é”™è¯¯
- ç»Ÿè®¡è„šæœ¬é”™è¯¯
- Parse/Syntaxé”™è¯¯ï¼ˆæ¥è‡ªé¡µé¢ï¼‰
- Networké”™è¯¯ï¼ˆéå…³é”®ï¼‰

âŒ ä¸ä¼šå¿½ç•¥ï¼ˆä¼šä¸­æ–­æµ‹è¯•ï¼‰:
- æ‰©å±•è‡ªèº«ä»£ç é”™è¯¯
- æµ‹è¯•æ­¥éª¤æ‰§è¡Œå¤±è´¥
- éªŒè¯æ–­è¨€å¤±è´¥
- è¶…æ—¶ï¼ˆè¶…è¿‡é…ç½®çš„timeoutï¼‰

---

## ğŸ’¡ é«˜çº§æŠ€å·§

### 1. è‡ªå®šä¹‰é”™è¯¯å¤„ç†

åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­æ·»åŠ é”™è¯¯å¤„ç†é€»è¾‘ï¼š

```json
{
  "type": "execute",
  "script": "try { /* å¯èƒ½å¤±è´¥çš„ä»£ç  */ } catch(e) { console.log('å·²å¤„ç†:', e); }",
  "description": "å¸¦é”™è¯¯å¤„ç†çš„è‡ªå®šä¹‰è„šæœ¬"
}
```

### 2. æ¡ä»¶æ‰§è¡Œ

```json
{
  "type": "execute",
  "script": "if (document.querySelector('#optional')) { /* æ“ä½œ */ }",
  "description": "æ¡ä»¶æ€§æ“ä½œ"
}
```

### 3. é”™è¯¯æ¢å¤

```json
{
  "type": "click",
  "selector": "#button",
  "retries": 3,
  "description": "æœ€å¤šå°è¯•3æ¬¡"
}
```

### 4. é˜²å¾¡æ€§éªŒè¯

```json
{
  "type": "verify",
  "verifyType": "elementExists",
  "selector": "#critical-element",
  "description": "ç¡®ä¿å…³é”®å…ƒç´ å­˜åœ¨"
}
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒ

### é‡åˆ°parse erroræ€ä¹ˆåŠï¼Ÿ

âœ… **æ— éœ€å¤„ç†** - å·²è‡ªåŠ¨å¿½ç•¥
- ç³»ç»Ÿä¼šè‡ªåŠ¨æ•è·æ­¤ç±»é”™è¯¯
- é”™è¯¯ä¸ä¼šä¸­æ–­æµ‹è¯•
- æŸ¥çœ‹æ§åˆ¶å°ç¡®è®¤"å·²å¿½ç•¥"æ ‡è®°

### å¦‚ä½•è®©æµ‹è¯•æ›´ç¨³å®šï¼Ÿ

1. ä½¿ç”¨ `waitForElement` ç­‰å¾…åŠ¨æ€å…ƒç´ 
2. æ·»åŠ  `retries` å‚æ•°æ”¯æŒé‡è¯•
3. å¢åŠ  `waitAfter` ç­‰å¾…é¡µé¢å“åº”
4. ä½¿ç”¨æ›´å…·ä½“çš„CSSé€‰æ‹©å™¨
5. åœ¨å…³é”®æ­¥éª¤å‰æ·»åŠ éªŒè¯

### å¦‚ä½•è°ƒè¯•æµ‹è¯•ç”¨ä¾‹ï¼Ÿ

1. æ‰“å¼€F12æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—
2. ä½¿ç”¨æ‚¬æµ®çƒæŸ¥çœ‹å®æ—¶è¿›åº¦
3. åœ¨æµ‹è¯•æŠ¥å‘Šä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
4. é€æ­¥æ‰§è¡Œï¼ˆå‡å°‘æ­¥éª¤æ•°é‡ï¼‰
5. ä½¿ç”¨ `execute` æ­¥éª¤æ·»åŠ è°ƒè¯•ä»£ç 

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [TEST_CASE_FORMAT_v2.0.md](TEST_CASE_FORMAT_v2.0.md) - æµ‹è¯•ç”¨ä¾‹æ ¼å¼
- [CUSTOM_TEST_USER_GUIDE_v2.0.md](CUSTOM_TEST_USER_GUIDE_v2.0.md) - ç”¨æˆ·æŒ‡å—
- [FLOATING_BALL_FIX_v2.0.md](FLOATING_BALL_FIX_v2.0.md) - æ‚¬æµ®çƒä¿®å¤
- [QUICKSTART_v2.0.md](QUICKSTART_v2.0.md) - å¿«é€Ÿå¼€å§‹

---

**ç‰ˆæœ¬**: v2.0.1
**æ›´æ–°å†…å®¹**:
- âœ… æ·»åŠ å…¨å±€é”™è¯¯æ•è·æœºåˆ¶
- âœ… å¢å¼ºæ­¥éª¤é‡è¯•åŠŸèƒ½
- âœ… è‡ªåŠ¨è¿‡æ»¤ç¬¬ä¸‰æ–¹é”™è¯¯
- âœ… å®Œå–„é”™è¯¯å¤„ç†æ–‡æ¡£

**ç”Ÿäº§å°±ç»ª**: âœ… å¯ç«‹å³ä½¿ç”¨
