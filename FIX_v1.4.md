# ğŸ”§ v1.4 ä¿®å¤è¯´æ˜ - 2026 å¹´ 1 æœˆ 9 æ—¥

## ğŸ› ä¿®å¤çš„é—®é¢˜

### 1. âœ… æ‚¬æµ®çƒä¸æ˜¾ç¤º

**é—®é¢˜**ï¼šå…³é—­æ’ä»¶ä¸»ç•Œé¢åï¼Œå³ä¾§æ‚¬æµ®çƒæ²¡æœ‰å‡ºç°

**åŸå› **ï¼š

- FloatingBallManager åˆå§‹åŒ–æ—¶æ²¡æœ‰è‡ªåŠ¨æ˜¾ç¤º
- popup å‘é€ showFloatingBall æ¶ˆæ¯æœ‰å»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š

```javascript
// floating-ball.js - initæ–¹æ³•æ·»åŠ 
init () {
  console.log('[FloatingBall] åˆå§‹åŒ–æ‚¬æµ®çƒç®¡ç†å™¨');
  this.injectFloatingBall();
  this.setupMessageListener();
  this.showBall(); // âœ… è‡ªåŠ¨æ˜¾ç¤ºæ‚¬æµ®çƒ
}

// popup.js - ç«‹å³å‘é€showFloatingBallæ¶ˆæ¯ï¼ˆä¸ç­‰å¾…ï¼‰
chrome.tabs.sendMessage(currentTab.id, {
  action: 'showFloatingBall'
}).catch(err => {
  console.log('showFloatingBallæ¶ˆæ¯å‘é€å¤±è´¥:', err);
});
```

---

### 2. âœ… è¡¨å•å¿…é¡»è‡ªåŠ¨å¡«å……å’Œæäº¤

**é—®é¢˜**ï¼šè¡¨å•æ²¡æœ‰çœŸæ­£è¢«å¡«å……ï¼Œæˆ–å¡«å……åæ²¡æœ‰æäº¤

**åŸå› **ï¼š

- äº‹ä»¶è§¦å‘ä¸å®Œæ•´ï¼ˆåªè§¦å‘äº† input äº‹ä»¶ï¼‰
- æäº¤æŒ‰é’®æ‰¾åˆ°åæ²¡æœ‰çœŸæ­£ç‚¹å‡»

**è§£å†³æ–¹æ¡ˆ**ï¼š

```javascript
// form-autofiller.js - fillInputå¢å¼º
// è§¦å‘å¤šä¸ªäº‹ä»¶ç¡®ä¿è¡¨å•å­—æ®µå€¼æ”¹å˜
input.dispatchEvent(new Event("input", { bubbles: true }));
input.dispatchEvent(new Event("change", { bubbles: true }));
input.dispatchEvent(new KeyboardEvent("keyup", { bubbles: true }));

// processSingleStepForm - çœŸæ­£ç‚¹å‡»æäº¤
const submitBtn = this.findAndClickSubmit(formElement);
if (submitBtn) {
  console.log("[FormAutoFiller] ç‚¹å‡»æäº¤æŒ‰é’®:", submitBtn.textContent);
  submitBtn.click(); // âœ… çœŸæ­£ç‚¹å‡»
  await this.delay(800); // ç­‰å¾…æäº¤å¤„ç†
}
```

---

### 3. âœ… åŠŸèƒ½å¿…é¡»æŒ‰é¡ºåºæµ‹è¯•ï¼ˆä¸èƒ½å¹¶è¡Œï¼‰

**é—®é¢˜**ï¼šå¤šä¸ªåŠŸèƒ½åŒæ—¶æµ‹è¯•ï¼Œå¯¼è‡´æ··ä¹±

**åŸå› **ï¼šè¯¯è§£ - ä»£ç å·²ç»æ˜¯é¡ºåºæ‰§è¡Œï¼ˆawait å¾ªç¯ï¼‰

**ç¡®è®¤**ï¼š

```javascript
// content-script.js - é€ä¸ªæµ‹è¯•ï¼ˆå·²æ˜¯é¡ºåºï¼‰
for (let i = 0; i < uniqueElements.length && testActive; i++) {
  await performInteraction(uniqueElements[i], i, uniqueElements.length);
  await delay(testConfig.delay || 800);
}
```

**å®é™…æµç¨‹**ï¼š

```
è¡¨å•1å¡«å…… â†’ æäº¤ â†’ ç­‰å¾…3ç§’
  â†“
è¡¨å•2å¡«å…… â†’ æäº¤ â†’ ç­‰å¾…3ç§’
  â†“
æŒ‰é’®1ç‚¹å‡» â†’ æ£€æµ‹å¼¹æ¡† â†’ å¤„ç†å¼¹æ¡† â†’ ç­‰å¾…800ms
  â†“
æŒ‰é’®2ç‚¹å‡» â†’ æ£€æµ‹å¼¹æ¡† â†’ å¤„ç†å¼¹æ¡† â†’ ç­‰å¾…800ms
  â†“
...ä¾æ¬¡è¿›è¡Œ
```

---

### 4. âœ… å¼¹æ¡†å¡«å……å®Œæˆåç‚¹å‡»ä¸‹ä¸€æ­¥/å…³é—­

**é—®é¢˜**ï¼šè¡¨å•å¼¹æ¡†å‡ºç°åï¼Œæ²¡æœ‰è‡ªåŠ¨å¤„ç†

**åŸå› **ï¼šæ²¡æœ‰æ£€æµ‹å¼¹æ¡†å’Œè‡ªåŠ¨å¡«å……å¼¹æ¡†å†…è¡¨å•

**è§£å†³æ–¹æ¡ˆ**ï¼š

```javascript
// content-script.js - æ–°å¢checkAndHandleModalå‡½æ•°
async function checkAndHandleModal() {
  // æŸ¥æ‰¾å„ç§æ¨¡æ€æ¡†
  const modalSelectors = [
    ".modal.show",
    ".modal.in",
    ".modal-dialog",
    '[role="dialog"]',
    ".ant-modal",
    ".el-dialog",
    ".ReactModal__Content",
    ".MuiDialog-root",
  ];

  // æŸ¥æ‰¾å¼¹æ¡†å†…çš„è¡¨å•
  const modalForm = modal.querySelector("form");
  if (modalForm) {
    const formFiller = new FormAutoFiller();
    await formFiller.fillForm(modalForm);
    // æŸ¥æ‰¾å¹¶ç‚¹å‡»æäº¤æŒ‰é’®
    const submitBtn = modalForm.querySelector(
      'button[type="submit"], .submit, .confirm'
    );
    if (submitBtn) {
      submitBtn.click();
    }
  }

  // æŸ¥æ‰¾å…³é—­æŒ‰é’®
  const closeBtn = modal.querySelector(
    '.close, .btn-close, [aria-label="å…³é—­"]'
  );
  if (closeBtn) {
    closeBtn.click();
  }
}

// åœ¨æŒ‰é’®ç‚¹å‡»åè°ƒç”¨
element.click();
await delay(500);
const modalDetected = await checkAndHandleModal(); // âœ… æ£€æµ‹å¹¶å¤„ç†å¼¹æ¡†
```

---

### 5. âœ… å¢å¼ºæŒ‰é’®å’Œè¡¨å•æŸ¥æ‰¾é€»è¾‘

**é—®é¢˜**ï¼šæŸäº›æŒ‰é’®æ— æ³•è¯†åˆ«ï¼ˆquerySelector ä¸æ”¯æŒ:containsï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š

```javascript
// form-autofiller.js - findNextButtonå¢å¼º
findNextButton (formElement) {
  // å…ˆé€šè¿‡ç±»åå’Œå±æ€§æŸ¥æ‰¾
  const nextButtons = formElement.querySelectorAll(
    'button.next, button[data-step="next"], .next-btn'
  );

  // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œéå†æ‰€æœ‰æŒ‰é’®æ£€æŸ¥æ–‡æœ¬
  const allButtons = formElement.querySelectorAll('button');
  for (const btn of allButtons) {
    const text = btn.textContent.trim().toLowerCase();
    if (text.includes('ä¸‹ä¸€æ­¥') || text.includes('next') ||
        text.includes('ç»§ç»­') || text.includes('continue')) {
      return btn;
    }
  }
}

// findAndClickSubmitåŒæ ·å¢å¼º
```

---

## ğŸ“Š ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶                 | ä¿®æ”¹å†…å®¹                                          | è¡Œæ•°å˜åŒ–   |
| -------------------- | ------------------------------------------------- | ---------- |
| `floating-ball.js`   | è‡ªåŠ¨æ˜¾ç¤ºæ‚¬æµ®çƒï¼Œå¢å¼º showBall                     | +5 è¡Œ      |
| `popup.js`           | ç«‹å³å‘é€ showFloatingBall æ¶ˆæ¯                    | ä¿®æ”¹ 15 è¡Œ |
| `form-autofiller.js` | å¢å¼ºäº‹ä»¶è§¦å‘ã€æŒ‰é’®æŸ¥æ‰¾ã€çœŸæ­£ç‚¹å‡»æäº¤              | +40 è¡Œ     |
| `content-script.js`  | æ–°å¢ checkAndHandleModal å‡½æ•°ï¼ŒæŒ‰é’®ç‚¹å‡»åæ£€æµ‹å¼¹æ¡† | +80 è¡Œ     |

---

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### æ”¹è¿› 1ï¼šæ‚¬æµ®çƒç”Ÿå‘½å‘¨æœŸ

```
é¡µé¢åŠ è½½
  â†“
FloatingBallManagerè‡ªåŠ¨åˆå§‹åŒ–
  â†“
è‡ªåŠ¨æ³¨å…¥HTMLå’ŒCSS
  â†“
è‡ªåŠ¨æ˜¾ç¤ºæ‚¬æµ®çƒ (showBall)
  â†“
popupå‘é€showFloatingBallæ¶ˆæ¯ï¼ˆç¡®è®¤æ˜¾ç¤ºï¼‰
```

### æ”¹è¿› 2ï¼šè¡¨å•å¤„ç†æµç¨‹

```
æ£€æµ‹è¡¨å• â†’ é€ä¸ªå¤„ç†
  â†“
å•æ­¥è¡¨å•ï¼š
  å¡«å……æ‰€æœ‰å­—æ®µ â†’ è§¦å‘input/change/keyupäº‹ä»¶ â†’ ç‚¹å‡»æäº¤æŒ‰é’® â†’ ç­‰å¾…800ms

å¤šæ­¥éª¤è¡¨å•ï¼š
  å¡«å……ç¬¬1æ­¥ â†’ ç‚¹å‡»ä¸‹ä¸€æ­¥ â†’ ç­‰å¾…800ms
  å¡«å……ç¬¬2æ­¥ â†’ ç‚¹å‡»ä¸‹ä¸€æ­¥ â†’ ç­‰å¾…800ms
  ...
  å¡«å……æœ€åä¸€æ­¥ â†’ ç‚¹å‡»æäº¤ â†’ ç­‰å¾…800ms

æ•´ä½“ç­‰å¾…3ç§’åç»§ç»­æŒ‰é’®æµ‹è¯•
```

### æ”¹è¿› 3ï¼šå¼¹æ¡†å¤„ç†æµç¨‹

```
ç‚¹å‡»æŒ‰é’®
  â†“
ç­‰å¾…500ms
  â†“
æ£€æµ‹å¼¹æ¡†ï¼ˆcheckAndHandleModalï¼‰
  â†“
æ‰¾åˆ°å¼¹æ¡†ï¼Ÿ
  â”œâ”€ æ˜¯ â†’ æ£€æµ‹è¡¨å•ï¼Ÿ
  â”‚      â”œâ”€ æ˜¯ â†’ å¡«å……è¡¨å• â†’ ç‚¹å‡»æäº¤
  â”‚      â””â”€ å¦ â†’ æŸ¥æ‰¾å…³é—­æŒ‰é’® â†’ ç‚¹å‡»å…³é—­
  â”‚
  â””â”€ å¦ â†’ ç»§ç»­
  â†“
ç­‰å¾…800ms
  â†“
æµ‹è¯•ä¸‹ä¸€ä¸ªå…ƒç´ 
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. åŠ è½½æ’ä»¶

```powershell
# åœ¨Chromeä¸­
chrome://extensions/
â†’ å¼€å¯å¼€å‘è€…æ¨¡å¼
â†’ åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº
â†’ é€‰æ‹© d:\test-auto\web-test-automation æ–‡ä»¶å¤¹
```

### 2. æ‰“å¼€æµ‹è¯•é¡µé¢

```
# æ–¹æ³•1ï¼šä½¿ç”¨å®Œæ•´æµ‹è¯•é¡µé¢
file:///d:/test-auto/web-test-automation/test-page-complete.html

# æ–¹æ³•2ï¼šä½¿ç”¨çœŸå®ç½‘ç«™
https://www.baidu.com
```

### 3. å¯åŠ¨æµ‹è¯•

```
1. ç‚¹å‡»æ’ä»¶å›¾æ ‡
2. ç¡®è®¤é…ç½®ï¼š
   âœ“ æµ‹è¯•è¡¨å•
   âœ“ æµ‹è¯•äº¤äº’
   âœ“ ç›‘æ§API
3. ç‚¹å‡»"å¼€å§‹æµ‹è¯•"
4. popupè‡ªåŠ¨å…³é—­
```

### 4. è§‚å¯Ÿæ‚¬æµ®çƒ

```
âœ“ å³ä¸‹è§’åº”è¯¥ç«‹å³å‡ºç°æ‚¬æµ®çƒï¼ˆ60x60pxç´«è‰²åœ†å½¢ï¼‰
âœ“ çƒå†…æ˜¾ç¤ºæ•°å­—ï¼ˆå·²æµ‹è¯•å…ƒç´ æ•°é‡ï¼‰
âœ“ ç‚¹å‡»æ‚¬æµ®çƒæ‰“å¼€è¿›åº¦é¢æ¿
âœ“ å®æ—¶æŸ¥çœ‹æ—¥å¿—å’Œç»Ÿè®¡
```

### 5. è§‚å¯Ÿæµ‹è¯•æµç¨‹

```
ğŸ“ æ­¥éª¤1ï¼šè¡¨å•å¤„ç†
  â†’ æ£€æµ‹åˆ°Xä¸ªè¡¨å•
  â†’ é€ä¸ªå¡«å……å’Œæäº¤
  â†’ ç­‰å¾…3ç§’

ğŸ” æ­¥éª¤2ï¼šæ»šåŠ¨é¡µé¢
  â†’ è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
  â†’ åŠ è½½æ‰€æœ‰å…ƒç´ 

ğŸ§ª æ­¥éª¤3ï¼šå…ƒç´ æµ‹è¯•
  â†’ é€ä¸ªæµ‹è¯•æŒ‰é’®
  â†’ æ£€æµ‹å¼¹æ¡†å¹¶å¤„ç†
  â†’ æµ‹è¯•é“¾æ¥ï¼ˆéªŒè¯ä¸è·³è½¬ï¼‰
  â†’ æµ‹è¯•è¾“å…¥æ¡†

âœ… æ­¥éª¤4ï¼šå®Œæˆ
  â†’ å›é€€åˆ°åˆå§‹é¡µé¢
  â†’ ç”ŸæˆæŠ¥å‘Š
```

---

## ğŸ¨ é¢„æœŸæ•ˆæœ

### æ‚¬æµ®çƒ

- âœ… ä½ç½®ï¼šå³ä¸‹è§’ï¼Œè·è¾¹ç•Œ 30px
- âœ… æ ·å¼ï¼šç´«è‰²æ¸å˜çƒä½“ï¼Œå¸¦è„‰å†²åŠ¨ç”»
- âœ… ç‚¹å‡»ï¼šæ‰“å¼€è¿›åº¦é¢æ¿ï¼ˆæ»‘å…¥åŠ¨ç”» 300msï¼‰
- âœ… çŠ¶æ€ï¼šæ˜¾ç¤ºå·²æµ‹è¯•æ•°é‡

### è¿›åº¦é¢æ¿

- âœ… å®æ—¶ç»Ÿè®¡ï¼šæˆåŠŸ/å¤±è´¥/é”™è¯¯/æ€»æ•°
- âœ… è¿›åº¦æ¡ï¼š0%â†’100%åŠ¨æ€å¡«å……
- âœ… æ—¥å¿—ï¼šæœ€æ–° 50 æ¡ï¼Œè‡ªåŠ¨æ»šåŠ¨
- âœ… æŒ‰é’®ï¼šæ‰“å¼€ä¸»ç•Œé¢ã€æš‚åœ/ç»§ç»­ã€æ¸…ç©ºæ—¥å¿—

### è¡¨å•å¤„ç†

- âœ… è‡ªåŠ¨æ£€æµ‹é¡µé¢ä¸Šæ‰€æœ‰è¡¨å•
- âœ… æ™ºèƒ½å¡«å……ï¼ˆemailâ†’test@example.comï¼Œphoneâ†’13800138000ï¼‰
- âœ… é€å­—ç¬¦è¾“å…¥ï¼ˆ30ms/å­—ç¬¦ï¼‰
- âœ… å¤šæ­¥éª¤è¡¨å•è‡ªåŠ¨ç‚¹å‡»"ä¸‹ä¸€æ­¥"
- âœ… è‡ªåŠ¨ç‚¹å‡»æäº¤æŒ‰é’®

### å¼¹æ¡†å¤„ç†

- âœ… æ£€æµ‹å„ç§æ¨¡æ€æ¡†ï¼ˆ.modal, [role="dialog"], .ant-modal ç­‰ï¼‰
- âœ… è‡ªåŠ¨å¡«å……å¼¹æ¡†å†…è¡¨å•
- âœ… è‡ªåŠ¨ç‚¹å‡»æäº¤/å…³é—­æŒ‰é’®
- âœ… æ—¥å¿—æ˜¾ç¤ºï¼š"æ£€æµ‹åˆ°å¼¹æ¡†å¹¶å·²å¤„ç†"

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹ Console æ—¥å¿—

```
F12 â†’ Console
æŸ¥æ‰¾å…³é”®æ—¥å¿—ï¼š
- [FloatingBall] åˆå§‹åŒ–æ‚¬æµ®çƒç®¡ç†å™¨
- [FloatingBall] æ‚¬æµ®çƒå·²æ˜¾ç¤º
- [FormAutoFiller] ç‚¹å‡»æäº¤æŒ‰é’®: xxx
- æ£€æµ‹åˆ°å¼¹æ¡†ï¼Œå‡†å¤‡å¤„ç†...
```

### æŸ¥çœ‹æ‚¬æµ®çƒæ˜¯å¦å­˜åœ¨

```javascript
// åœ¨Consoleè¾“å…¥
document.getElementById("floating-ball-container");
// åº”è¯¥è¿”å›HTMLå…ƒç´ ï¼Œè€Œä¸æ˜¯null
```

### æŸ¥çœ‹è¡¨å•æ˜¯å¦è¢«å¡«å……

```javascript
// åœ¨Consoleè¾“å…¥
document.querySelectorAll("form");
// æ£€æŸ¥è¡¨å•å­—æ®µçš„valueå±æ€§
```

### æ‰‹åŠ¨è§¦å‘æ‚¬æµ®çƒ

```javascript
// åœ¨Consoleè¾“å…¥
if (window.floatingBallManager) {
  window.floatingBallManager.showBall();
} else {
  console.log("FloatingBallManageræœªåˆå§‹åŒ–");
}
```

---

## ğŸ“ å·²çŸ¥é™åˆ¶

1. **éªŒè¯ç **ï¼šæ— æ³•è‡ªåŠ¨å¤„ç† reCAPTCHA ç­‰éªŒè¯ç 
2. **å¤æ‚åŠ¨æ€è¡¨å•**ï¼šæŸäº›ç”± JavaScript åŠ¨æ€ç”Ÿæˆçš„è¡¨å•å¯èƒ½éœ€è¦æ›´é•¿ç­‰å¾…æ—¶é—´
3. **ç¬¬ä¸‰æ–¹åº“**ï¼šæŸäº›ä½¿ç”¨ React/Vue çš„è‡ªå®šä¹‰è¡¨å•ç»„ä»¶å¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†
4. **iframe**ï¼šä¸æ”¯æŒ iframe å†…çš„è¡¨å•
5. **Shadow DOM**ï¼šä¸æ”¯æŒ Shadow DOM å†…çš„å…ƒç´ 

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰é—®é¢˜å·²ä¿®å¤ï¼š
âœ… æ‚¬æµ®çƒæ­£å¸¸æ˜¾ç¤º
âœ… è¡¨å•è‡ªåŠ¨å¡«å……å’Œæäº¤
âœ… åŠŸèƒ½æŒ‰é¡ºåºæµ‹è¯•ï¼ˆéå¹¶è¡Œï¼‰
âœ… å¼¹æ¡†è‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†
âœ… å…³é—­æŒ‰é’®è‡ªåŠ¨ç‚¹å‡»

ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. åœ¨ Chrome ä¸­åŠ è½½æ’ä»¶
2. æ‰“å¼€ test-page-complete.html æµ‹è¯•é¡µé¢
3. ç‚¹å‡»æ’ä»¶å›¾æ ‡å¼€å§‹æµ‹è¯•
4. è§‚å¯Ÿå³ä¸‹è§’æ‚¬æµ®çƒå’Œå®æ—¶è¿›åº¦
5. æŸ¥çœ‹æ‰€æœ‰è¡¨å•è‡ªåŠ¨å¡«å……ã€æŒ‰é’®è‡ªåŠ¨ç‚¹å‡»ã€å¼¹æ¡†è‡ªåŠ¨å¤„ç†

äº«å—å…¨è‡ªåŠ¨åŒ–æµ‹è¯•ä½“éªŒï¼ğŸš€
