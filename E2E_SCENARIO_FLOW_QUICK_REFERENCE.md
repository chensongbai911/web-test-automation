# E2E 场景流水报告 - 快速参考

## 📊 报告构成

```
┌─────────────────────────────────────────────────────┐
│ 1️⃣ KPI概览卡片 (页面顶部)                            │
│   ├─ 📈 总步骤数                                    │
│   ├─ ✅ 成功步骤                                    │
│   ├─ ❌ 失败步骤                                    │
│   ├─ 📊 成功率(%)                                   │
│   └─ ⏱️ 总耗时(秒)                                  │
├─────────────────────────────────────────────────────┤
│ 2️⃣ 操作序列表格 (中间)                              │
│   每一行代表一个用户操作                             │
│   列: 步骤|行为|目标|结果|耗时|框架                   │
│   点击可查看失败原因                                 │
├─────────────────────────────────────────────────────┤
│ 3️⃣ 性能分析 (下方)                                  │
│   ├─ 平均耗时                                       │
│   ├─ 最大耗时 ← 性能瓶颈                            │
│   └─ 最小耗时                                       │
├─────────────────────────────────────────────────────┤
│ 4️⃣ API统计 (更下方)                                │
│   ├─ GET/POST/PUT/DELETE 分布                       │
│   └─ ⚠️ 失败请求列表                               │
├─────────────────────────────────────────────────────┤
│ 5️⃣ 关键路径 (最下方)                                │
│   失败操作 + 关键操作(navigate/submit/login)        │
│   每个关键步骤显示目标/耗时/错误原因                 │
└─────────────────────────────────────────────────────┘
```

## 🎯 使用场景速查

| 场景           | 查看位置   | 快速诊断                          |
| -------------- | ---------- | --------------------------------- |
| **找失败步骤** | 关键路径   | 红色 ❌ 标记，显示错误信息        |
| **查性能瓶颈** | 性能分析   | 最大耗时操作，可能是网络/数据加载 |
| **API 问题**   | API 统计   | 失败请求列表，按 status 码排查    |
| **框架兼容性** | 操作序列表 | 过滤框架列，对比成功率            |
| **整体质量**   | KPI 卡片   | 成功率 > 90%为良好                |

## 📋 操作行为类型

| 行为         | 说明                            | 典型耗时   |
| ------------ | ------------------------------- | ---------- |
| **按钮**     | button/submit 点击              | 200-500ms  |
| **链接**     | a[href]导航                     | 500-2000ms |
| **输入**     | input/textarea 文本输入         | 100-300ms  |
| **下拉**     | component-select                | 300-800ms  |
| **组件交互** | DatePicker/Cascader/Checkbox 等 | 400-3000ms |

## 🔍 快速诊断流程

```
1. 查看成功率
   ├─ > 95% → 优秀，基本无问题 ✅
   ├─ 80-95% → 良好，有1-2个问题
   └─ < 80% → 需要优化

2. 成功率低时，查看关键路径
   ├─ 找红色❌标记的步骤
   ├─ 读取错误信息
   └─ 确定根本原因

3. 根本原因分析
   ├─ API错误? → 查看API统计和失败请求
   ├─ 耗时太长? → 查看性能分析，找到最大耗时操作
   └─ 框架问题? → 在操作序列表按框架过滤，对比成功率

4. 采取行动
   ├─ 服务端问题 → 通知后端team
   ├─ 性能问题 → 优化数据加载、缓存、网络
   └─ 框架兼容性 → 更新框架/组件选择器
```

## 📊 KPI 参考值

| 指标         | 优秀   | 良好     | 一般   | 差   |
| ------------ | ------ | -------- | ------ | ---- |
| **成功率**   | >98%   | 90-98%   | 70-90% | <70% |
| **平均耗时** | <500ms | 500ms-1s | 1-2s   | >2s  |
| **最大耗时** | <2s    | 2-5s     | 5-10s  | >10s |
| **失败率**   | 0-2%   | 2-10%    | 10-30% | >30% |

## 🎨 结果指示器

| 符号 | 含义      | 颜色               |
| ---- | --------- | ------------------ |
| ✅   | 操作成功  | 绿色 (#52c41a)     |
| ❌   | 操作失败  | 红色 (#ff4d4f)     |
| 🎯   | 关键操作  | 黄色标签 (#faad14) |
| ⚠️   | 需要注意  | 橙黄色             |
| 📊   | 数据/统计 | 蓝色 (#1890ff)     |

## 💡 常见问题排查

### Q1: 为什么某个按钮点击不成功?

**查看步骤**：

1. 在操作序列表找到该按钮操作 (❌ 标记)
2. 查看错误信息
3. 可能的原因:
   - 选择器错误 → 检查目标列的 CSS 选择器
   - 页面元素未加载 → 检查前一步是否成功
   - 权限问题 → 查看 API 调用中是否有 401/403 错误

### Q2: 为什么测试这么慢?

**查看步骤**：

1. 查看性能分析的"最大耗时"
2. 在操作序列表找到最慢的操作 (按耗时排序)
3. 检查该操作的 API 调用
   - 有 API 失败? → 服务端性能问题
   - API 调用次数多? → 考虑批量请求或缓存

### Q3: 为什么某个框架的组件总是失败?

**查看步骤**：

1. 在操作序列表按"框架"列过滤
2. 对比该框架与其他框架的成功率
3. 查看失败原因 (通常是选择器或事件不匹配)
4. 更新对应框架的交互策略

### Q4: 如何定位 API 错误?

**查看步骤**：

1. 打开"API 调用统计"
2. 查看"失败请求"列表
3. 逐个排查：
   - 501/502/503 → 服务器维护
   - 404 → 接口路径错误
   - 400 → 请求参数错误
   - 401/403 → 认证/授权问题
   - 500 → 服务器逻辑错误

## 🔗 关键路径中的操作类型

| 操作           | 标签    | 说明             |
| -------------- | ------- | ---------------- |
| navigate       | 🎯 关键 | 页面导航         |
| submit         | 🎯 关键 | 表单提交         |
| login          | 🎯 关键 | 登录操作         |
| logout         | 🎯 关键 | 登出操作         |
| delete         | 🎯 关键 | 删除操作         |
| (其他失败步骤) | ❌      | 任何失败都会显示 |

## 📱 响应式视图

报告在不同设备上的表现：

- **桌面 (>1200px)**:

  - KPI 卡片: 5 列并排
  - 表格: 全宽，可横向滚动
  - 图表: 并排显示

- **平板 (768px-1200px)**:

  - KPI 卡片: 3 列 + 2 列
  - 表格: 可横向滚动
  - 图表: 堆叠显示

- **手机 (<768px)**:
  - KPI 卡片: 纵向堆叠
  - 表格: 卡片式展开
  - 图表: 全宽显示

## 🔄 数据刷新

- 每次运行新测试后，报告自动更新
- 数据保存在浏览器本地 (Chrome Storage)
- 清除浏览器数据会删除报告
- 支持导出 CSV 格式进行二次分析

## 🎓 学习路径

1. **新手**: 关注 KPI 卡片的成功率，了解整体质量
2. **进阶**: 查看关键路径，定位具体问题
3. **高级**: 分析操作序列表细节，对比性能指标，优化测试流程

---

**💾 数据存储**: 本地 Chrome Storage (`e2eScenario`)
**📦 容量**: 单个报告通常 50-200KB (取决于步骤数)
**⏱️ 保留期**: 浏览器清理数据前长期保留
**🔐 隐私**: 仅本地存储，不上传服务器
