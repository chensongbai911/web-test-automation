# 🤖 Qwen API 密钥配置完整指南

**版本：** 1.5.2
**更新日期：** 2026-01-09
**您的密钥：** `sk-ca34cf449ebe4deb9ce529d40d37b21a`

---

## 📋 快速开始（5 分钟）

### 第 1 步：打开扩展设置

1. 点击浏览器中的扩展图标 🧩
2. 点击弹出窗口中的 **⚙️ Qwen 设置** 按钮

![设置按钮位置](说明：在popup窗口的右上角)

### 第 2 步：输入您的 API 密钥

```
复制您的密钥：sk-ca34cf449ebe4deb9ce529d40d37b21a
粘贴到 "API 密钥" 输入框
```

### 第 3 步：测试连接

1. 点击 **🔍 测试连接** 按钮
2. 等待连接测试完成
3. 看到 `✅ 连接成功！` 表示成功

### 第 4 步：保存配置

1. 点击 **💾 保存配置** 按钮
2. 看到 `✅ 配置已保存！` 提示
3. 模态窗口将自动关闭

**完成！现在您可以使用 AI 功能了。** 🎉

---

## 🔑 获取 API 密钥

### 方法 1：使用已有密钥（推荐）

您已有密钥：`sk-ca34cf449ebe4deb9ce529d40d37b21a`

只需按照上述"快速开始"步骤配置即可。

### 方法 2：从 DashScope 获取新密钥

1. **访问 DashScope 官网**

   ```
   https://dashscope.aliyuncs.com/api-overview
   ```

2. **登录账户**

   - 使用阿里云账号登录
   - 或创建新账号

3. **创建 API 密钥**

   - 进入"API-KEY 管理"
   - 点击"创建新的 API-KEY"
   - 选择"Qwen"模型
   - 复制生成的密钥

4. **在扩展中配置**
   - 打开扩展 Qwen 设置
   - 粘贴新密钥
   - 点击"测试连接"
   - 点击"保存配置"

---

## ✨ 功能说明

### 启用 AI 分析

勾选 **启用 Qwen AI 分析** 选项后，扩展将自动：

- ✅ 分析测试报告中的数据
- ✅ 识别测试中的问题
- ✅ 提供性能优化建议
- ✅ 生成质量评分
- ✅ 推荐改进方案

### AI 能做什么

1. **智能弹框识别**

   ```
   ✓ 自动识别页面弹框类型
   ✓ 找到最优的弹框关闭方式
   ✓ 推荐关闭按钮位置
   ```

2. **测试质量分析**

   ```
   ✓ 计算测试通过率
   ✓ 识别失败原因
   ✓ 评估测试覆盖率
   ✓ 给出改进建议
   ```

3. **性能优化**

   ```
   ✓ 分析API响应速度
   ✓ 识别瓶颈问题
   ✓ 推荐优化方案
   ✓ 预测可能的问题
   ```

4. **风险评估**
   ```
   ✓ 检测高风险功能
   ✓ 识别常见错误
   ✓ 提供预防措施
   ✓ 优先级排序
   ```

---

## 🛡️ 安全性说明

### 您的密钥是安全的

✅ **本地存储**

- 密钥仅保存在您的浏览器中
- 使用 Chrome Storage API 加密存储
- 不会被上传到任何外部服务器

✅ **隐私保护**

- 扩展不收集您的测试数据
- 仅在您主动使用 AI 分析时才调用 Qwen API
- API 调用直接连接到阿里云 DashScope
- 没有中间服务器

✅ **权限控制**

- 密钥仅在分析报告时使用
- 不用于任何其他目的
- 您随时可以禁用 AI 功能
- 可随时更改或删除密钥

### 密钥管理建议

1. **定期检查**

   - 每月查看是否使用了该密钥
   - 检查 DashScope 账户的调用记录

2. **及时更新**

   - 如果怀疑密钥泄露，立即更换
   - 在 DashScope 中删除旧密钥
   - 生成新密钥并更新扩展

3. **访问权限**
   - 确保只有您能访问浏览器
   - 定期清理浏览器数据（可选）
   - 使用强密码保护阿里云账户

---

## 🔧 高级配置

### 禁用 AI 功能

如果您不想使用 AI 功能：

1. 打开 Qwen 设置
2. **取消勾选** "启用 Qwen AI 分析"
3. 点击"保存配置"
4. 扩展将不再调用 AI

### 更换密钥

1. 打开 Qwen 设置
2. 清空现有密钥
3. 输入新密钥
4. 点击"测试连接"
5. 点击"保存配置"

### 导出配置

在浏览器 DevTools 中运行：

```javascript
chrome.storage.local.get(["qwenApiKey", "qwenEnabled"], console.log);
```

### 导入配置

```javascript
chrome.storage.local.set({
  qwenApiKey: "your-key-here",
  qwenEnabled: true,
});
```

---

## 📊 使用场景

### 场景 1：首次使用

```
1. 安装扩展
2. 打开 ⚙️ Qwen设置
3. 配置 API 密钥
4. 开始进行测试
5. AI 会自动分析结果
```

### 场景 2：遇到问题

```
1. 如果 AI 识别失败
   → 检查 API 密钥是否正确
   → 点击"测试连接"验证
   → 查看 Console 日志

2. 如果测试卡住
   → 禁用 AI 功能继续测试
   → 稍后重新启用

3. 如果连接超时
   → 检查网络连接
   → 重试测试连接
   → 检查 DashScope 服务状态
```

### 场景 3：优化工作流

```
1. 首次运行测试（AI 启用）
2. 获得 AI 分析报告
3. 按照建议改进代码
4. 再次运行测试验证
5. 对比改进前后的分析报告
```

---

## ❓ 常见问题

### Q1: 密钥过期了怎么办？

**A:** 密钥不会自动过期。但如果：

- 在 DashScope 中手动删除了密钥 → 需要生成新的
- 怀疑密钥泄露 → 建议更换新的
- 密钥被多个设备使用 → 可生成多个密钥分别使用

### Q2: API 调用有费用吗？

**A:** 取决于您的账户类型：

- **免费额度用户**: 有免费调用次数限制
- **付费用户**: 按调用次数计费
- **查看费用**: 登录 DashScope 查看详细的调用记录和费用

### Q3: 如何查看 API 的调用记录？

**A:**

1. 访问 https://dashscope.aliyuncs.com/
2. 登录您的账户
3. 进入"监控中心"
4. 查看"API 调用记录"
5. 可按日期、模型、状态筛选

### Q4: 能否离线使用？

**A:** 否，AI 功能需要网络连接：

- 需要连接到阿里云 DashScope
- 基础测试功能可离线使用
- AI 分析功能必须在线

### Q5: 密钥丢失了怎么办？

**A:** 密钥一旦生成后无法查看原始值：

1. 在 DashScope 中删除旧密钥
2. 生成新密钥
3. 在扩展中更新新密钥

### Q6: 支持哪些模型？

**A:** 当前支持：

- **qwen-max** (推荐) - 最强能力
- **qwen-plus** - 平衡性能
- **qwen-turbo** - 最快速度

默认使用 `qwen-max` 获得最佳分析效果。

### Q7: 如何联系支持？

**A:** 如有问题：

1. **查看文档** - 阅读本指南
2. **检查日志** - 按 F12 查看 Console
3. **测试连接** - 验证 API 密钥有效性
4. **重新配置** - 尝试重新保存设置
5. **DashScope 支持** - https://dashscope.aliyuncs.com/

---

## 🚀 下一步

现在您已经配置好 Qwen API：

1. ✅ **配置完成**

   - API 密钥已保存
   - AI 功能已启用
   - 可以开始测试

2. 📊 **运行第一次完整测试**

   - 输入测试 URL
   - 点击"开始测试"
   - 查看测试报告

3. 🤖 **获取 AI 分析**

   - 测试完成后自动获得分析
   - 查看质量评分
   - 查看改进建议

4. 📈 **持续优化**
   - 根据 AI 建议改进
   - 定期运行测试
   - 跟踪测试数据趋势

---

## 📞 技术支持

### 获取帮助

- 📖 查看 [质量保证指南](./QUALITY_ASSURANCE_v1.5.2.md)
- 🔧 查看 [弹框处理指南](./MODAL_HANDLING_GUIDE.md)
- 🚀 查看 [快速开始指南](./QUICKSTART.md)
- 📚 查看 [项目说明](./README.md)

### 检查状态

在浏览器 Console 中查看：

```javascript
// 查看配置
chrome.storage.local.get(["qwenApiKey", "qwenEnabled"], console.log);

// 查看版本
console.log("[Web测试工具] 版本 1.5.2");

// 查看日志
// 按 F12 打开开发者工具查看 Console 标签
```

---

**版本历史：**

- v1.5.2：完整的 Qwen API 配置和 AI 集成
- v1.5.1：弹框处理系统 2.0
- v1.5.0：Qwen AI 初步集成

**上次更新：** 2026 年 1 月 9 日

祝您使用愉快！🎉
